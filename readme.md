# Задания для back-end
Ниже будут описаны запросы для различный частей back-end части
## Необходимо выполнить перед запуском
- Создать config.py в разделе Memes с написать следующий код:
```
import os

file_path = os.path.abspath(os.getcwd()) + "/mems.db"
SECRET_KEY = '...'
SQLALCHEMY_DATABASE_URI = 'sqlite:///' + file_path
SQLALCHEMY_TRACK_MODIFICATIONS = True
access_token = '...'

```
Этот файл содержит секретный ключ и ТОКЕН, поэтому я не стал его выкладывать. Свой секретный ключ токен нужно ввести вместо '...'
- Создать виртуальное окружение:

Установить библиотеку virtualenv для python командой:
```
pip install virtualenv 
```
Создать окружение командой:
```
py -m venv venv  
```
Зайти в него командой (для windows):
```
.\venv\Scripts\activate
```
- Импортировать зависимость с помощью requirements.txt командой:
```
pip install -r .\requirements.txt
```

## Запуск
- Необходимо прописть команду:
```
 py .\run.py  
```
Может возникнуть ошибка в библиотеке vk:
```
ImportError: cannot import name 'Iterable' from 'collections'
```
[Решение](https://stackoverflow.com/questions/35762077/creating-a-new-object-returns-attributeerror-list-object-has-no-attribute-s)

## Тестирование

- Проводилось через Postman. json со всеми запросами, приложил

## Запросы для первого задания
Текст задания:

Загрузите все мемы в вашу базу (или просто скачайте их локально, используя API ВКонтакте). 
Выведите в консоль информацию о полученных мемах — их авторов и количество лайков.

Решение:

Подключаюсь к api и через токен получаю фотографии из альбома с информацией об авторе и посте.
### Загрузка мемов (требуется логин, пароль, url)на интересующий альбом)
- Сразу после успешной загрузки будет redirect на url с запросом на вывод всех мемов, т.е. будет вывод всех мемов

![image](https://user-images.githubusercontent.com/78679833/174429925-0fb53d16-9855-4456-8c13-8bbd5858c6df.png)

### Получение всех мемов
- Если база мемов не пуста, то выведется следующее
![image](https://user-images.githubusercontent.com/78679833/174429939-7aa823a6-2e17-4d8d-bcc4-8981ae3ee59a.png)

- Если база пуста, то выведется соответствующее сообщение:
![image](https://user-images.githubusercontent.com/78679833/174429953-138c0613-27b7-485f-b7e0-2d554163d595.png)

### Удаление всех мемов
- В случае если база была не пуста, то мемы будут удалено и будет выведено соответствующее сообщение
![image](https://user-images.githubusercontent.com/78679833/174427112-8a816112-2f25-43ad-b7a2-2f473c9a9d11.png)

- В случае если база пуста, то будет выведено соответствующее сообщение
![image](https://user-images.githubusercontent.com/78679833/174427131-a09de029-b5c0-4b24-a23e-3c30d9d9d08d.png)

## Запросы для второго задания
Текст задания:

Поддержите две команды — лайк и скип каждого из предложенных мемов. Показывайте мемы в порядке их появления в альбоме.

Решение:
Для упорядочивания мемов в порядке загрузки, в параметрах photos.get прописал rev=1. Реализовал с помощью метода POST и переменной l_or_p.
### Лайк ( l_or_p = 1 )
![image](https://user-images.githubusercontent.com/78679833/174456929-730d3681-88ab-418b-8d68-c6ab621feed8.png)

### Пропуск ( l_or_p = 0 )
![image](https://user-images.githubusercontent.com/78679833/174456957-64967bda-d229-4eab-b243-85bcb60a7579.png)

### Первый элемент
![image](https://user-images.githubusercontent.com/78679833/174456949-b61b74c5-7552-4dbf-ad33-a7ae770f3e6b.png)

### Последний элемент
![image](https://user-images.githubusercontent.com/78679833/174456941-a5705271-0eb2-4780-a513-1269bf791d10.png)

### При пустой базе
![image](https://user-images.githubusercontent.com/78679833/174456906-7aa30201-8e50-4707-bba3-960d023c8906.png)

## Запросы для третьего задания
Текст задания:

Отрегулируйте порядок выдачи мемов таким образом, чтобы заданный заранее мем набрал больше всего лайков. Показывайте его чаще других, а конкурирующие мемы, набирающие много лайков, показывайте реже.

Решение:

Отсортировать по возрастанию и через один показывать свой рекомендуемый мем. При этом, если мы доходим до мемов с кол-вом лайков большим, чем у нашего рекомендуемого поста, то повляется шанс 33% заменить его нашим мемов, чтобы показывать популярные мемы реже.

### Рандомное пролайкавание мемов от 1 до 1000 лайков
Запрос, что бы самому не проставлять лайки. Удобнее при тестировании.

![image](https://user-images.githubusercontent.com/78679833/174457005-9952f949-27f1-4c3b-8e5a-d87f2cdc7a75.png)
### Сделать мем приоритетным
![image](https://user-images.githubusercontent.com/78679833/174457029-8bffedd3-da6e-40cf-bb5d-74114efbcf82.png)

### При отсутствии такого мема в базе
![image](https://user-images.githubusercontent.com/78679833/174457039-644edb0f-328a-495d-915c-9028ddb6ff56.png)

### При пустой базе
![image](https://user-images.githubusercontent.com/78679833/174457045-ddb52767-70c5-47e5-b2ed-7228f7f72987.png)

## Запросы для четвёртого задания
Текст задания:

Отрегулируйте порядок выдачи мемов таким образом, чтобы заданный заранее мем набрал больше всего лайков. Показывайте его чаще других, а конкурирующие мемы, набирающие много лайков, показывайте реже.

### Получение всех мемов из альбома по ссылке на него
![image](https://user-images.githubusercontent.com/78679833/174457064-fa2f478b-5264-4b75-93fd-44cd7a518200.png)

Таким образом можно добавить мемы из таких групп как например [Подслушано ДВФУ](https://vk.com/album-71711391_282573148) и вместо 50 мемов, теперь их станет 60.

Вот например, я для себя проверил и вывел в консоль все объекты модели Mems

![image](https://user-images.githubusercontent.com/78679833/174457173-cb264d80-4054-4bd8-b05e-1e0d7db68575.png)
